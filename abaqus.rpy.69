# -*- coding: mbcs -*-
#
# Abaqus/CAE Release 6.14-2 replay file
# Internal Version: 2014_08_22-09.00.46 134497
# Run by leal26 on Wed Mar 15 19:16:51 2017
#

# from driverUtils import executeOnCaeGraphicsStartup
# executeOnCaeGraphicsStartup()
#: Executing "onCaeGraphicsStartup()" in the site directory ...
#: Warning: Permission was denied for "abaqus.rpy"; "abaqus.rpy.69" will be used for this session's replay file.
from abaqus import *
from abaqusConstants import *
session.Viewport(name='Viewport: 1', origin=(0.0, 0.0), width=234.129150390625, 
    height=264.936126708984)
session.viewports['Viewport: 1'].makeCurrent()
session.viewports['Viewport: 1'].maximize()
from caeModules import *
from driverUtils import executeOnCaeStartup
executeOnCaeStartup()
session.viewports['Viewport: 1'].partDisplay.geometryOptions.setValues(
    referenceRepresentation=ON)
openMdb(pathName='C:/Users/leal26/Documents/GitHub/leafy_wingy/wing_model.cae')
#* *** Error: File open failed (utl_File: CreateFile in OpenUpdate)
#* error: The process cannot access the file because it is being used by 
#* another process.
#* 
#* file: C:\Users\leal26\Documents\GitHub\leafy_wingy\wing_model.cae
openMdb(pathName='C:/Users/leal26/Documents/GitHub/leafy_wingy/wing_model.cae')
#* *** Error: File open failed (utl_File: CreateFile in OpenUpdate)
#* error: The process cannot access the file because it is being used by 
#* another process.
#* 
#* file: C:\Users\leal26\Documents\GitHub\leafy_wingy\wing_model.cae
o1 = session.openOdb(
    name='C:/Users/leal26/Documents/GitHub/leafy_wingy/Analysis.odb')
session.viewports['Viewport: 1'].setValues(displayedObject=o1)
#: Model: C:/Users/leal26/Documents/GitHub/leafy_wingy/Analysis.odb
#: Number of Assemblies:         1
#: Number of Assembly instances: 0
#: Number of Part instances:     1
#: Number of Meshes:             1
#: Number of Element Sets:       7
#: Number of Node Sets:          8
#: Number of Steps:              2
cliCommand("""from abaqus_tools import get_displacement, find_maxMises""")
cliCommand("""# Abaqus parameters""")
cliCommand("""JobName = 'Analysis'""")
cliCommand("""ModelName = 'wing_structure'""")
cliCommand("""Step1 = 'Aerodynamic loading'""")
cliCommand("""Step2 = 'Morphing displacement'""")
cliCommand("""TE_displacement = get_displacement(JobName + '.odb', Step1)""")
\
    #: Made it in
#: Warning: The database has been opened with readOnly flag on. It will remain readOnly.
#: odb open
#: Retrieving ALL final displacements at ALL points
#: Retrieving ALL displacements at TIPNODE
#: Retrieving only U2 at TIPNODE
cliCommand("""TE_displacement""")
#: 0.0012492927
cliCommand("""max_stress_venation = find_maxMises(JobName, Step2, 'Set-Venation-Structure')""")
#: Model: C:/Users/leal26/Documents/GitHub/leafy_wingy/Analysis.odb
#: Number of Assemblies:         1
#: Number of Assembly instances: 0
#: Number of Part instances:     1
#: Number of Meshes:             1
#: Number of Element Sets:       7
#: Number of Node Sets:          8
#: Number of Steps:              2
#: An assembly level elset named Set-Venation-Structure doesnot exist in the output database Analysis.odb
#* Exit code: 0
#* File "C:\Users\leal26\Documents\GitHub\abaqus_tools\abaqus_tools.py", line 
#* 164, in find_maxMises
#*     exit(0)
#* File "SMAPython\SMAPytLibPy.m\src\site.py", line 481, in __call__
